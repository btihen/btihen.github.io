<!DOCTYPE html><html lang="en-us" >

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Bill Tihen">

  
  
  
    
  
  <meta name="description" content="With when Controllers need to trigger a chain of complex activities, one approach to keeping the code workable is to use Command Objects, the Command Pattern and even Lambdas">

  
  <link rel="alternate" hreflang="en-us" href="http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/">

  


  
  
  
  <meta name="theme-color" content="#00008b">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/xcode.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/xcode.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu9e8c7d04b47910fd67a38e5a526b68e7_64368_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu9e8c7d04b47910fd67a38e5a526b68e7_64368_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@btihen">
  <meta property="twitter:creator" content="@btihen">
  
  <meta property="og:site_name" content="btihen">
  <meta property="og:url" content="http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/">
  <meta property="og:title" content="Simplify Complex Behavior and Decisions | btihen">
  <meta property="og:description" content="With when Controllers need to trigger a chain of complex activities, one approach to keeping the code workable is to use Command Objects, the Command Pattern and even Lambdas"><meta property="og:image" content="http://localhost:1313/img/btihen_landing_page.png">
  <meta property="twitter:image" content="http://localhost:1313/img/btihen_landing_page.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-08-14T01:11:22&#43;02:00">
    
    <meta property="article:modified_time" content="2021-08-14T01:11:22&#43;02:00">
  

  



  


  


  





  <title>Simplify Complex Behavior and Decisions | btihen</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  






  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu0d53a2a03d4a529abcdd0318d0f2ad50_8175_0x70_resize_lanczos_3.png" alt="btihen"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu0d53a2a03d4a529abcdd0318d0f2ad50_8175_0x70_resize_lanczos_3.png" alt="btihen"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/authors/btihen/"><span>.me</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://container4.ch/" target="_blank" rel="noopener"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#post_ruby_rails"><span>Ruby</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#post_elixir_phoenix"><span>Elixir</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#post_crystal"><span>Crystal</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#post_tech_notes"><span>Tech</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#post_edu"><span>Edu</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Pubs</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#in_news"><span>News</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Simplify Complex Behavior and Decisions</h1>

  
  <p class="page-subtitle">Command Objects, Strategy Pattern and Lambdas</p>
  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span><a href="/authors/btihen/">Bill Tihen</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Sat, Aug 14, 2021
  </span>
  

  

  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <h2 id="motivation">Motivation</h2>
<p>At work we keep adding features - as our code evolves it tends to fill with lots of conditionals (<code>if</code> and <code>case</code> statements).  Our general rule is all business logic should be in a command and the controller is very simple and just triggers the business logic.</p>
<h2 id="recent-situation">Recent Situation</h2>
<p>Recently we were extending our billing system.</p>
<p>All users are grouped by the service they are using and have a billing configuration.</p>
<p>Our system automatically prints monthly bills for everyone, except those pay automatically (cron triggers a ruby rake task that calls our command object directly).</p>
<p>That same group of people may have extra charges occasionally sent to all in the group or just a select group of people &ndash; these bills are sent to everyone since they are one-off payments, so they need to go to all people - no matter how they pay their regular bills.  These one off bills are generated by a person (via a rails controller).</p>
<p>Another time we legally need to send a physical bill to everyone is when the monthly fee changes we.  As you can imagine the selection logic was getting complex and we were sending in more and more parameters to control the logic.</p>
<p>Our first line of simplification is to extract behaviors out of the controllers and into <code>command objects</code> (some call these service objects, but we reserve that name for external services).</p>
<h2 id="in-the-beginning">In The Beginning</h2>
<p>We had a straight-forward setup</p>
<pre><code class="language-ruby"># lists other user's (challenger's) submissions
class InvoicesController &lt; ApplicationController
  def new
    invoices_form = InvoicesForm.new(invoices_params)
    render :new, locals: {invoices_form: invoices_form}
  end

  def create
    invoices_form = InvoicesForm.new(invoices_params)
    send_invoices = SendInvoicesCommand.new(invoices_form)
    # our commands return a truthy or falsy value
    if invoices_form.valid? &amp;&amp; (result = send_invoices.run) &amp;&amp; result[:success]
      job_id = result[:result]
      redirect_to jobs_path(job_id), success: &quot;Invoices Job Successfully Submitted&quot;
    else
      flash.now[:error] = &quot;Invoices Form / Job has errors&quot;
      render :new, locals: {invoices_form: invoices_form}
    end
  end

  private
  def invoices_params
    params.require(:invoices) .permit(:invoice_id, :group_id, customer_ids: [])
  end
end
</code></pre>
<p>The Form Model (without the extras for Rails Validations and forms)</p>
<pre><code class="language-ruby">class InvoiceForm
  attr_reader :invoice_form

  # validations

  def new(params)
    @params = params
  end

  def invoice_form
    invoice_form = {}
    # ... whatever is needed to organize and check complex inputs and collect / join multiple models

    invoice_form
  end
end
</code></pre>
<pre><code class="language-ruby">class InvoicesCommand

  def new(invoices_form)
    @invoices_form = invoices_form
  end

  def run
    customer_invoices = InvoiceBuilder.generate_invoices(invoices_form[:customers],
                                                         invoices_form[:time_range])
    send_invoices = customer_invoices.reject { |ci| ci[:customer].ebanking? }  # customers setup knows
    job_id = SendInvoicesJob.call(send_invoices)
    {success: true, result: job_id}
  rescue StandardError =&gt; error
    {success: false, error: error}
  end

  private
  attr_reader :invoices_form
end
</code></pre>
<h2 id="getting-complex">Getting Complex</h2>
<p>Over time with legal changes and added features our logic was getting complex (even convoluted).</p>
<p>I find these are easiest to spot when there a lot of if statements - especially when they are controlling the behavior of another object.</p>
<pre><code class="language-ruby">class InvoicesCommand

  def new(invoices_form)
    @invoices_form = invoices_form
  end

  def run
    customer_invoices = InvoiceBuilder.generate_invoices(invoices_form)
    send_invoices = if invoices_form[:print_all] &amp;&amp; invoices_form[:customer_ids]
                      customer_invoices.select { |ci| ci[:customer].ebanking? &amp;&amp; !ci[:invoice].monthly? }
                    elsif invoices_form[:customer_ids]
                      customer_invoices.reject { |ci| ci[:customer].ebanking? &amp;&amp; ci[:invoice].monthly? }
                    # ... other user and system choices to filters
                    else
                      customer_invoices.reject { |ci| ci[:customer].ebanking? }  # customers setup knows
                    end
    job_id = SendInvoicesJob.call(send_invoices)
    {success: true, result: job_id}
  rescue StandardError =&gt; error
    {success: false, error: error}
  end

  private
  attr_reader :invoices_form

  def select_invoices_to_send(customer_invoices)
    return customer_invoices if invoices_form[:print_all]   # user wants a print copy for all
    return customer_invoices if invoices_form[:cutomer_ids] # user specifically chose these for
    # ... other user and system choices to filters

    # or just the default filter
    customer_invoices.filter { |ci| !ci[:customer].ebanking? }
  end
end
</code></pre>
<h2 id="first-attempt---encapsulate-logic-in-a-method">First Attempt - (encapsulate logic in a method)</h2>
<p>encapsulate in a method with guards and comments - now the main logic is clear</p>
<pre><code class="language-ruby">class InvoicesCommand

  def new(invoices_form)
    @invoices_form = invoices_form
  end

  def run
    customer_invoices = InvoiceBuilder.generate_invoices(invoices_form)
    send_invoices = select_invoices_to_send(customer_invoices)
    job_id = SendInvoicesJob.call(send_invoices)
    {success: true, result: job_id}
  rescue StandardError =&gt; error
    {success: false, error: error}
  end

  private
  attr_reader :invoices_form

  def select_invoices_to_send(customer_invoices)
    # explain logic
    if invoices_form[:print_all] &amp;&amp; invoices_form[:customer_ids]
      return customer_invoices
    end
    if invoices_form[:customer_ids] # user specifically chose these for
      return customer_invoices.reject { |ci| ci[:invoices].all?(&amp;:monthly?) }
    end

    # ... other user and system choices to filters

    # or do the default filter - send to people without ebanking
    customer_invoices.filter { |ci| !ci[:customer].ebanking? }
  end
end
</code></pre>
<h2 id="second-attempt---strategy-pattern-traditional">Second Attempt - Strategy Pattern (Traditional)</h2>
<p>But then it ocurred to us - why should this object have to sort through all the various inputs and deduce what the user or cron-job wanted to do with the filtering.  So we opted for the strategy pattern and each sender would send the filter pattern wanted.  Also this allows us to name each filter (and clarify intention).</p>
<pre><code class="language-ruby">module InvoiceFilter
  # input: customer_invoices = [ {customer: customer, invoice: invoice}, ... ]
  class AllInvoices
    def call(customer_invoices)
      customer_invoices  # no filter - send on alle
    end
  end

  class AllWithoutEbilling
    def call(customer_invoices)
      customer_invoices.filter { |ci| !ci[:customer].ebanking? }
    end
  end

  class AllExceptionalInvoices
    def call(customer_invoices)
      customer_invoices.inject do |ci, result=[]|
        result &lt;&lt; {
                    customer: customer,
                    invoices: invoices.map { |inv| !inv.monthly? }
                  }
        result
      end
    end
  end

end
</code></pre>
<p>Now we need to change the</p>
<pre><code class="language-ruby">class InvoiceForm

  attr_reader :invoice_form

  # validations
  # validates ...

  def new(params)
    @params = params
  end

  def invoice_form
    invoice_form = {}
    # ... whatever is needed
    invoice_form[:filter] = filter_logic

    invoice_form
  end

  private
  def filter_logic
    return InvoiceFilter::AllInvoices.new            if params[:filter] == :all
    return InvoiceFilter::AllExceptionalInvoices.new if params[:filter] == :all_exceptional

    InvoiceFilter::AllWithoutEbilling.new
  end

end
</code></pre>
<pre><code class="language-ruby">class InvoicesCommand

  def new(invoices_form)
    @invoices_form = invoices_form
  end

  def run
    customer_invoices = InvoiceBuilder.generate_invoices(invoices_form)
    invoices = filter_invoices(customer_invoices)
    job_id = SendInvoicesJob.call(invoices)
    {success: true, result: job_id}
  rescue StandardError =&gt; error
    {success: false, error: error}
  end

  private
  attr_reader :invoices_form

  def filter_invoices
    # in-case a strategy isn't chosen - we set the default strategy
    filter_strategy = invoices_form[:filter] || InvoiceFilter::SelectWithoutEbillingInvoices.new

    filter_strategy.call(customer_invoices)
  end
end
</code></pre>
<p>this design also allows us to send simple lambdas - the form could be rewritten with:</p>
<pre><code class="language-ruby">class InvoiceForm
  attr_reader :invoice_form

  # validations
  # validates ...

  def new(params)
    @params = params
  end

  def invoice_form
    invoice_form = {}
    # ... whatever is needed
    invoice_form[:filter] = filter_logic

    invoice_form
  end

  private
  def filter_logic
    return InvoiceFilter::AllInvoices.new          if params[:filter] == :all
    return InvoiceFilter::AllExceptionalInvoices.new if params[:filter] == :all_exceptional

    InvoiceFilter::SelectWithoutEbillingInvoices.new
  end

end
</code></pre>
<h2 id="third-attempt---simplify-strategy-with-lambdas">Third Attempt - Simplify Strategy with Lambdas</h2>
<p>Some filters are very simple we also want to encourage extensions.</p>
<p>Its also good to note that lambdas are also invoked with .call(), so we transformed the simplest filers into lambdas.</p>
<p>Lambdas allow you to encapsulate code and assign it a variable name (&amp; pass it around) and invoke it as  convenient.</p>
<pre><code class="language-ruby">module InvoiceFilter
  # input: customer_invoices = [ {customer: customer, invoice: invoice}, ... ]

  ALL_INVOICES    = lambda { |customer_invoices| customer_invoices }
  ALL_NO_EBILLING = lambda do |customer_invoices|
                              customer_invoices.filter { |ci| !ci[:customer].ebanking? }
                           end
  class AllExceptionalInvoices
    def call(customer_invoices)
      customer_invoices.inject do |ci, result=[]|
        result &lt;&lt; {
                    customer: customer,
                    invoices: invoices.map { |inv| !inv.monthly? }
                  }
        result
      end
    end
  end

end
</code></pre>
<p>Now we need to change the</p>
<pre><code class="language-ruby">class InvoiceForm

  FILTER_ChOICES = {'all_customer_invoices'     =&gt; InvoiceFilter::ALL_INVOICES,
                    'all_customers_wo_ebilling' =&gt; InvoiceFilter::ALL_NO_EBILLING,
                    'all_exceptional_invoices'  =&gt; InvoiceFilter::AllExceptionalInvoices.new}
  FILTER_KEYS    = FILTER_ChOICES.keys

  attr_reader :invoice_form

  # validations
  # validates ...

  def new(params)
    @params = params
  end

  def invoice_form
    invoice_form = {}
    # ... whatever is needed
    invoice_form[:filter] = filter_logic

    invoice_form
  end

  private
  attr_reader :params

  def validate_filter
    # no choice is valid - we will use the default
    return if params[:filter].blank?
    # a filter (lambda?) sent in by a rake task
    return if params[:filter].responds_to?(:call)
    # a pre-defined filter chosen in the gui
    return if FILTER_KEYS.include?(params[:filter].to_sym)

    errors.add(:filter, 'not a valid filter')
  end

  def filter_logic
    # default filter if no filter is selected
    return InvoiceFilter::ALL_NO_EBILLING  if params[:filter].blank?

    # allow automated internal tasks with access to pass in their own filters
    return params[:filter]                 if params[:filter].responds_to?(:call)

    # did the user select a pre-defined filter available in the GUI
    if params[:filter].is_s? String &amp;&amp; VALID_FILTER_KEYS.include?(filter_symbol)
      return FILTER_CHOICES[filter_symbol]
    end

    # this shouldn't happen if validated before running
    raise 'filter error'
  end

end
</code></pre>
<pre><code class="language-ruby">class InvoicesCommand

  def new(invoices_form)
    @invoices_form = invoices_form
  end

  def run
    customer_invoices = InvoiceBuilder.generate_invoices(invoices_form)
    invoices = filter_invoices(customer_invoices)
    job_id = SendInvoicesJob.call(invoices)
    {success: true, result: job_id}
  rescue StandardError =&gt; error
    {success: false, error: error}
  end

  private
  attr_reader :invoices_form

  def filter_invoices
    # in-case a strategy isn't chosen - we set the default strategy
    filter_strategy = invoices_form[:filter] || InvoiceFilter::SelectWithoutEbillingInvoices.new

    filter_strategy.call(customer_invoices)
  end
end
</code></pre>
<h2 id="resources">Resources</h2>
<p>STRATEGY VS COMMAND PATTERN</p>
<ul>
<li>
<a href="https://stackoverflow.com/questions/4834979/difference-between-strategy-pattern-and-command-pattern" target="_blank" rel="noopener">https://stackoverflow.com/questions/4834979/difference-between-strategy-pattern-and-command-pattern</a></li>
<li>
<a href="https://newbedev.com/using-a-strategy-pattern-and-a-command-pattern" target="_blank" rel="noopener">https://newbedev.com/using-a-strategy-pattern-and-a-command-pattern</a></li>
<li>
<a href="https://miafish.wordpress.com/2015/01/16/command-pattern-vs-strategy-pattern/" target="_blank" rel="noopener">https://miafish.wordpress.com/2015/01/16/command-pattern-vs-strategy-pattern/</a></li>
<li>
<a href="https://coderanch.com/t/100214/engineering/Command-Strategy-Pattern" target="_blank" rel="noopener">https://coderanch.com/t/100214/engineering/Command-Strategy-Pattern</a></li>
<li></li>
</ul>
<p>STRATEGY</p>
<ul>
<li>
<p>
<a href="https://dockyard.com/blog/2013/07/25/design-patterns-strategy-pattern" target="_blank" rel="noopener">https://dockyard.com/blog/2013/07/25/design-patterns-strategy-pattern</a></p>
</li>
<li>
<p>
<a href="https://wickedlysmart.com/using-lambda-expressions-with-the-strategy-pattern/" target="_blank" rel="noopener">https://wickedlysmart.com/using-lambda-expressions-with-the-strategy-pattern/</a></p>
</li>
<li>
<p>
<a href="https://blog.sebastian-daschner.com/entries/strategy-pattern-cdi-lambdas" target="_blank" rel="noopener">https://blog.sebastian-daschner.com/entries/strategy-pattern-cdi-lambdas</a></p>
</li>
<li>
<p>
<a href="https://refactoring.guru/design-patterns/strategy/ruby/example" target="_blank" rel="noopener">https://refactoring.guru/design-patterns/strategy/ruby/example</a></p>
</li>
<li>
<p>
<a href="http://rubyblog.pro/2016/10/ruby-strategy-pattern" target="_blank" rel="noopener">http://rubyblog.pro/2016/10/ruby-strategy-pattern</a></p>
</li>
<li>
<p>
<a href="https://dev.to/andyobtiva/strategic-e9i" target="_blank" rel="noopener">https://dev.to/andyobtiva/strategic-e9i</a></p>
</li>
<li>
<p>
<a href="https://github.com/AndyObtiva/strategic" target="_blank" rel="noopener">https://github.com/AndyObtiva/strategic</a></p>
</li>
<li>
<p>
<a href="https://andymaleh.blogspot.com/2021/03/strategic-091-strategy.html" target="_blank" rel="noopener">https://andymaleh.blogspot.com/2021/03/strategic-091-strategy.html</a></p>
</li>
</ul>
<p>COMMAND</p>
<ul>
<li>
<a href="https://www.sihui.io/design-pattern-command/" target="_blank" rel="noopener">https://www.sihui.io/design-pattern-command/</a></li>
<li>
<a href="https://rubypatterns.dev/general/command.html" target="_blank" rel="noopener">https://rubypatterns.dev/general/command.html</a></li>
<li>
<a href="https://dockyard.com/blog/2013/11/05/design-patterns-command-pattern" target="_blank" rel="noopener">https://dockyard.com/blog/2013/11/05/design-patterns-command-pattern</a></li>
<li>
<a href="https://jobandtalent.engineering/command-pattern-how-and-why-we-use-it-fa8af952bca1" target="_blank" rel="noopener">https://jobandtalent.engineering/command-pattern-how-and-why-we-use-it-fa8af952bca1</a></li>
<li>
<a href="https://blog.appsignal.com/2021/04/14/ruby-on-rails-controller-patterns-and-anti-patterns.html" target="_blank" rel="noopener">https://blog.appsignal.com/2021/04/14/ruby-on-rails-controller-patterns-and-anti-patterns.html</a></li>
<li>
<a href="https://metalelf0.github.io/rails/2016/05/02/command-pattern.htm" target="_blank" rel="noopener">https://metalelf0.github.io/rails/2016/05/02/command-pattern.htm</a></li>
</ul>
<p>LAMBDA</p>
<ul>
<li>
<a href="https://scoutapm.com/blog/how-to-use-lambdas-in-ruby" target="_blank" rel="noopener">https://scoutapm.com/blog/how-to-use-lambdas-in-ruby</a></li>
<li>
<a href="https://sodocumentation.net/ruby/topic/474/blocks-and-procs-and-lambdas" target="_blank" rel="noopener">https://sodocumentation.net/ruby/topic/474/blocks-and-procs-and-lambdas</a></li>
<li>
<a href="https://blog.appsignal.com/2018/09/04/ruby-magic-closures-in-ruby-blocks-procs-and-lambdas.html" target="_blank" rel="noopener">https://blog.appsignal.com/2018/09/04/ruby-magic-closures-in-ruby-blocks-procs-and-lambdas.html</a></li>
<li>
<a href="https://www.freecodecamp.org/news/design-patterns-command-and-concierge-in-life-and-ruby-aab9815817ea/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/design-patterns-command-and-concierge-in-life-and-ruby-aab9815817ea/</a></li>
</ul>
<p>Decorator

<a href="https://www.rootstrap.com/blog/how-to-improve-maintainability-in-rails-applications-using-patterns/" target="_blank" rel="noopener">https://www.rootstrap.com/blog/how-to-improve-maintainability-in-rails-applications-using-patterns/</a></p>
<p>
<a href="https://goiabada.blog/interactors-in-ruby-easy-as-cake-simple-as-pie-33f66de2eb78" target="_blank" rel="noopener">https://goiabada.blog/interactors-in-ruby-easy-as-cake-simple-as-pie-33f66de2eb78</a></p>
<ul>
<li>
<p>
<a href="https://refactoring.guru/design-patterns/command/ruby/example" target="_blank" rel="noopener">https://refactoring.guru/design-patterns/command/ruby/example</a></p>
</li>
<li>
<ul>
<li>
<a href="https://agprolink.asfmra.org/HigherLogic/System/DownloadDocumentFile.ashx?DocumentFileKey=71b7446e-6c64-3974-bb9e-0ff0a0cf8305" target="_blank" rel="noopener">https://agprolink.asfmra.org/HigherLogic/System/DownloadDocumentFile.ashx?DocumentFileKey=71b7446e-6c64-3974-bb9e-0ff0a0cf8305</a></li>
</ul>
</li>
<li>
<p>
<a href="https://makandracards.com/alexander-m/43748-command-pattern" target="_blank" rel="noopener">https://makandracards.com/alexander-m/43748-command-pattern</a></p>
</li>
<li>
<p>
<a href="https://medium.com/@dljerome/design-patterns-in-ruby-command-802b785d1bbd" target="_blank" rel="noopener">https://medium.com/@dljerome/design-patterns-in-ruby-command-802b785d1bbd</a></p>
</li>
<li>
<p>
<a href="https://medium.com/@ibell/the-ruby-command-pattern-pt-1-ad6711af0722" target="_blank" rel="noopener">https://medium.com/@ibell/the-ruby-command-pattern-pt-1-ad6711af0722</a></p>
</li>
<li>
<p>
<a href="https://stackoverflow.com/questions/43535421/command-pattern-in-ruby" target="_blank" rel="noopener">https://stackoverflow.com/questions/43535421/command-pattern-in-ruby</a></p>
</li>
<li>
<p>
<a href="https://github.com/davidgf/design-patterns-in-ruby/blob/master/command.md" target="_blank" rel="noopener">https://github.com/davidgf/design-patterns-in-ruby/blob/master/command.md</a></p>
</li>
<li></li>
<li>
<p>
<a href="https://scoutapm.com/blog/how-to-use-lambdas-in-ruby" target="_blank" rel="noopener">https://scoutapm.com/blog/how-to-use-lambdas-in-ruby</a></p>
</li>
<li>
<p>
<a href="https://stackoverflow.com/questions/43535421/command-pattern-in-ruby" target="_blank" rel="noopener">https://stackoverflow.com/questions/43535421/command-pattern-in-ruby</a></p>
</li>
<li>
<p>
<a href="https://medium.com/@nakshtra17/ruby-design-pattern-command-method-3d1e3f41d39d" target="_blank" rel="noopener">https://medium.com/@nakshtra17/ruby-design-pattern-command-method-3d1e3f41d39d</a></p>
</li>
<li>
<p>
<a href="http://journal.stuffwithstuff.com/2009/07/02/closures-and-the-command-pattern/" target="_blank" rel="noopener">http://journal.stuffwithstuff.com/2009/07/02/closures-and-the-command-pattern/</a></p>
</li>
<li>
<p>
<a href="http://radar.oreilly.com/2014/12/using-the-command-pattern-with-lambda-expressions.html" target="_blank" rel="noopener">http://radar.oreilly.com/2014/12/using-the-command-pattern-with-lambda-expressions.html</a></p>
</li>
<li>
<p>
<a href="https://github.com/piscolomo/ruby-patterns/blob/master/command.rb" target="_blank" rel="noopener">https://github.com/piscolomo/ruby-patterns/blob/master/command.rb</a></p>
</li>
<li>
<p>
<a href="https://en.wikipedia.org/wiki/Command_pattern" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Command_pattern</a></p>
</li>
<li>
<p>
<a href="https://sodocumentation.net/ruby/topic/474/blocks-and-procs-and-lambdas" target="_blank" rel="noopener">https://sodocumentation.net/ruby/topic/474/blocks-and-procs-and-lambdas</a></p>
</li>
<li>
<p>
<a href="https://www.freecodecamp.org/news/the-basic-design-patterns-all-developers-need-to-know/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/the-basic-design-patterns-all-developers-need-to-know/</a></p>
</li>
<li>
<p>
<a href="https://www.developer.com/java/understanding-lambda-enabled-design-patterns/" target="_blank" rel="noopener">https://www.developer.com/java/understanding-lambda-enabled-design-patterns/</a></p>
</li>
<li></li>
</ul>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/rails/">Rails</a>
  
  <a class="badge badge-light" href="/tags/command-object/">command object</a>
  
  <a class="badge badge-light" href="/tags/strategy-pattern/">strategy pattern</a>
  
  <a class="badge badge-light" href="/tags/lambda/">lambda</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/&amp;text=Simplify%20Complex%20Behavior%20and%20Decisions" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/&amp;t=Simplify%20Complex%20Behavior%20and%20Decisions" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Simplify%20Complex%20Behavior%20and%20Decisions&amp;body=http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/&amp;title=Simplify%20Complex%20Behavior%20and%20Decisions" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Simplify%20Complex%20Behavior%20and%20Decisions%20http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=http://localhost:1313/post_ruby_rails/rails_6_x_simplify_complex_behavior_decisions/&amp;title=Simplify%20Complex%20Behavior%20and%20Decisions" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/authors/btihen/avatar_hu1862451442ed779787ed1b218e0a75c3_96954_270x270_fill_q90_lanczos_center.jpeg" alt="Bill Tihen">
      

      <div class="media-body">
        <h5 class="card-title"><a href="http://localhost:1313/">Bill Tihen</a></h5>
        <h6 class="card-subtitle">Developer, Data Enthusiast, Educator and Nature&rsquo;s Friend</h6>
        <p class="card-text">very curious &ndash; known to explore knownledge and nature</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/btihen" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/btihen" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/bill-tihen" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/files/TihenWilliamResume-2020.pdf" >
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  














  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js" integrity="sha256-lyWCDMnMeZiXRi7Zl54sZGKYmgQs4izcT7+tKc+KUBk=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/crystal.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/elixir.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/python.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/ruby.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/swift.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.4aaf2d64e50f8e54cf66dcc54147a22e.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    © 2021
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
